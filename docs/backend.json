{
  "entities": {
    "business": {
      "title": "Business",
      "description": "Represents a single business entity or organization.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the business."
        },
        "ownerId": {
          "type": "string",
          "description": "The UID of the user who owns this business."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the business was created."
        }
      },
      "required": ["name", "ownerId", "createdAt"]
    },
    "branch": {
      "title": "Branch",
      "description": "Represents a physical or logical location within a business.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the branch."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the branch was created."
        }
      },
      "required": ["name", "createdAt"]
    },
    "item": {
      "title": "Inventory Item",
      "description": "Represents an item in the inventory. It can be a finished product or a raw component.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the item."
        },
        "description": {
          "type": "string",
          "description": "A description of the item."
        },
        "quantity": {
          "type": "number",
          "description": "The current stock quantity. Not applicable for products with recipes."
        },
        "value": {
          "type": "number",
          "description": "The monetary value of a single unit of the item."
        },
        "unitType": {
          "type": "string",
          "enum": ["pcs", "box", "pack"],
          "description": "The unit of measurement for the quantity."
        },
        "itemType": {
          "type": "string",
          "enum": ["Product", "Component"],
          "description": "The type of item: a sellable Product or a raw Component."
        },
        "categoryId": {
          "type": "string",
          "description": "The ID of the category this item belongs to."
        },
        "expirationDate": {
          "type": "string",
          "format": "date-time",
          "description": "The expiration date of the item, if applicable."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the item was added."
        }
      },
      "required": ["name", "itemType", "value", "createdAt"]
    },
    "category": {
      "title": "Item Category",
      "description": "A category for organizing inventory items.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the category."
        },
        "color": {
          "type": "string",
          "description": "A hex or HSL color code for the category."
        },
        "showInSales": {
          "type": "boolean",
          "description": "Whether this category should appear on the sales page."
        }
      },
      "required": ["name", "color"]
    },
    "recipe": {
      "title": "Recipe",
      "description": "Defines the components and quantities needed to make a product.",
      "type": "object",
      "properties": {
        "productId": {
          "type": "string",
          "description": "The ID of the finished product item."
        },
        "productName": {
          "type": "string",
          "description": "The name of the finished product."
        },
        "components": {
          "type": "array",
          "description": "An array of components that make up the product.",
          "items": {
            "type": "object",
            "properties": {
              "itemId": {
                "type": "string",
                "description": "The ID of the component item."
              },
              "quantity": {
                "type": "number",
                "description": "The quantity of the component needed."
              }
            },
            "required": ["itemId", "quantity"]
          }
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the recipe was created."
        }
      },
      "required": ["productId", "productName", "components", "createdAt"]
    },
    "inventoryHistory": {
      "title": "Inventory History Log",
      "description": "A log entry for a change in inventory.",
      "type": "object",
      "properties": {
        "itemId": {
          "type": "string"
        },
        "itemName": {
          "type": "string"
        },
        "change": {
          "type": "number"
        },
        "newQuantity": {
          "type": "number"
        },
        "type": {
          "type": "string",
          "enum": ["initial", "add", "update", "delete", "quantity"]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["itemId", "itemName", "change", "newQuantity", "type", "createdAt"]
    },
     "userProfile": {
      "title": "User Profile",
      "description": "Represents a user's public profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string"
        },
        "photoURL": {
          "type": "string",
          "format": "uri"
        },
        "email": {
          "type": "string",
          "format": "email"
        }
      },
       "required": ["displayName", "email"]
    }
  },
  "auth": {
    "providers": ["email-password"]
  },
  "firestore": {
    "/businesses/{businessId}": {
      "schema": {
        "$ref": "#/entities/business"
      },
      "description": "Top-level collection for business entities."
    },
    "/businesses/{businessId}/branches/{branchId}": {
      "schema": {
        "$ref": "#/entities/branch"
      },
      "description": "Sub-collection for branches within a business."
    },
    "/businesses/{businessId}/branches/{branchId}/items/{itemId}": {
      "schema": {
        "$ref": "#/entities/item"
      },
      "description": "Sub-collection for inventory items within a branch."
    },
    "/businesses/{businessId}/branches/{branchId}/categories/{categoryId}": {
      "schema": {
        "$ref": "#/entities/category"
      },
      "description": "Sub-collection for categories within a branch."
    },
    "/businesses/{businessId}/branches/{branchId}/recipes/{recipeId}": {
      "schema": {
        "$ref": "#/entities/recipe"
      },
      "description": "Sub-collection for recipes within a branch."
    },
    "/businesses/{businessId}/branches/{branchId}/history/{historyId}": {
      "schema": {
        "$ref": "#/entities/inventoryHistory"
      },
      "description": "Sub-collection for inventory history logs within a branch."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/userProfile"
      },
      "description": "Collection to store user profile information."
    }
  }
}
